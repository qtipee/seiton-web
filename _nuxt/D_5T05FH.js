import{_ as C,o as p,c as m,a as e,u as V,b as a,q as n,F as M,s as R,v as U,t as g,x as D,m as H,r as _,y as K,n as j,w as A,z as $,A as q,g as W,B as I,C as F,P as B}from"./B9Jdsbtr.js";import{_ as S,M as X,a as Y}from"./C3Jz3Cf2.js";import{B as ee}from"./DiylWhZt.js";import{_ as te}from"./Dt0qqAj6.js";const se={},ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function le(w,s){return p(),m("svg",ne,s[0]||(s[0]=[e("path",{d:"M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"},null,-1)]))}const oe=C(se,[["render",le]]),ie={class:"flex flex-row-reverse items-center gap-4"},ae={class:"flex items-center space-x-2"},re={key:0,class:"flex space-x-2"},ce=["onClick"],de={class:"text-sm"},ue={__name:"Tab",setup(w){const s=V();return(x,i)=>{const o=oe;return p(),m("div",ie,[e("button",{class:"rounded bg-white py-1 px-3 text-left text-gray-900 hover:bg-gray-100 duration-200",onClick:i[0]||(i[0]=(...v)=>n(s).addNewTicket&&n(s).addNewTicket(...v))},[e("span",ae,[a(o,{class:"size-3.5"}),i[1]||(i[1]=e("span",{class:"text-sm"},"Nouveau Ticket",-1))])]),n(s).ticketsOpen.length>1?(p(),m("div",re,[(p(!0),m(M,null,R(n(s).ticketsOpen,(v,r)=>(p(),m("button",{key:r,class:U(["rounded bg-white py-1.5 px-3 text-left text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300",[n(s).activeTicketIndex===r?"bg-gray-300 outline-gray-900":""]]),onClick:y=>n(s).selectActiveTicket(r)},[e("span",de," Ticket "+g(r+1),1)],10,ce))),128))])):D("",!0)])}}},pe={},xe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function ve(w,s){return p(),m("svg",xe,s[0]||(s[0]=[e("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"},null,-1),e("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"},null,-1)]))}const fe=C(pe,[["render",ve]]),me={},_e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function ge(w,s){return p(),m("svg",_e,s[0]||(s[0]=[e("path",{"fill-rule":"evenodd",d:"M4.25 12a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"},null,-1)]))}const O=C(me,[["render",ge]]),ye={},we={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function be(w,s){return p(),m("svg",we,s[0]||(s[0]=[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"},null,-1)]))}const N=C(ye,[["render",be]]),$e={class:"flex flex-col"},he={class:"overflow-y-auto"},ke={class:"flex-1 text-left"},Ce={class:"w-20 text-right"},Ae={class:"w-20 text-right"},Te={class:"w-20 text-right"},Me={class:"w-20 text-right"},Pe={class:"w-20 flex justify-end items-center"},Ie={class:"flex flex-col space-y-4"},Fe={class:"flex flex-col space-y-2"},Ve={class:"flex space-x-4"},He=H({__name:"List",setup(w){const s=V(),x=_(!1),i=_(null),o=_(0),v=y=>{o.value+=y,o.value<0&&(o.value=0)},r=y=>{y&&i.value&&s.updateArticleQuantity(i.value.articleID,o.value)};return(y,u)=>{const f=fe,c=O,h=N,T=S;return p(),m(M,null,[e("div",$e,[u[3]||(u[3]=K('<div class="flex items-center px-4 py-2 sm:px-6 lg:px-8 bg-gray-700 text-white font-semibold"><div class="flex-1 text-left">Article</div><div class="w-20 text-right">Quantité</div><div class="w-20 text-right">Rabais</div><div class="w-20 text-right">Prix</div><div class="w-20 text-right">Total</div><div class="w-20"></div></div>',1)),e("div",he,[(p(!0),m(M,null,R(n(s).currentTicket.scannedArticles,(d,b)=>(p(),m("div",{key:d.article.id,class:U(["flex items-center px-4 py-2 sm:px-6 lg:px-8",b%2===0?"bg-white":"bg-gray-100"])},[e("div",ke,g(d.article.name),1),e("div",Ce,g(d.quantity),1),e("div",Ae,g(d.article.discount),1),e("div",Te,g(d.article.unitPrice),1),e("div",Me,g(((d.article.unitPrice-(d.article.discount??0))*d.quantity).toFixed(2)),1),e("div",Pe,[a(f,{class:"w-4 h-4",onClick:Z=>{i.value=d.article,o.value=d.quantity,x.value=!0}},null,8,["onClick"])])],2))),128))])]),n(i)?(p(),j(T,{key:0,open:n(x),"onUpdate:open":u[2]||(u[2]=d=>$(x)?x.value=d:null),title:n(i).name,"approve-text":"Valider",onAccepted:r},{default:A(()=>[e("div",Ie,[e("div",Fe,[e("label",null,g(`Quantité : ${n(o)}`),1)]),e("div",Ve,[a(c,{class:"w-12 h-12 rounded-full text-white bg-red-500",onClick:u[0]||(u[0]=d=>v(-1))}),a(h,{class:"w-12 h-12 rounded-full text-white bg-green-500",onClick:u[1]||(u[1]=d=>v(1))})]),u[4]||(u[4]=e("p",{class:"italic text-gray-500"}," Une quantité de 0 supprime l'article. ",-1))])]),_:1},8,["open","title"])):D("",!0)],64)}}}),Se={},Ze={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function Be(w,s){return p(),m("svg",Ze,s[0]||(s[0]=[e("path",{d:"M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z","clip-rule":"evenodd"},null,-1)]))}const Re=C(Se,[["render",Be]]),Ue={},De={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function je(w,s){return p(),m("svg",De,s[0]||(s[0]=[e("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"},null,-1)]))}const qe=C(Ue,[["render",je]]),Oe={class:"flex flex-col space-y-4"},Ne={class:"flex flex-col space-y-2"},Qe={class:"flex flex-col space-y-2"},ze={for:"article-quantity"},Le={class:"flex space-x-4"},Ee=H({__name:"Add",props:{open:{type:Boolean,required:!0}},emits:["update:open"],setup(w,{emit:s}){const x=w,i=s,o=q({get:()=>x.open,set:f=>i("update:open",f)}),v=_(""),r=_(1),y=f=>{r.value+=f,r.value<1&&(r.value=1)},u=f=>{f&&V().addScannedArticle(v.value,r.value)};return W(()=>x.open,f=>{f&&(v.value="",r.value=1)}),(f,c)=>{const h=O,T=N,d=S;return p(),j(d,{open:n(o),"onUpdate:open":[c[3]||(c[3]=b=>$(o)?o.value=b:null),c[4]||(c[4]=b=>o.value=b)],title:"Ajouter un Article","approve-text":"Ajouter",onAccepted:u},{default:A(()=>[e("div",Oe,[e("div",Ne,[c[5]||(c[5]=e("label",{for:"article-id"}," ID de l'article : ",-1)),I(e("input",{"onUpdate:modelValue":c[0]||(c[0]=b=>$(v)?v.value=b:null),name:"article-id",class:"p-2 border rounded"},null,512),[[F,n(v)]])]),e("div",Qe,[e("label",ze,g(`Quantité : ${n(r)}`),1)]),e("div",Le,[a(h,{class:"w-12 h-12 rounded-full text-white bg-red-500",onClick:c[1]||(c[1]=b=>y(-1))}),a(T,{class:"w-12 h-12 rounded-full text-white bg-green-500",onClick:c[2]||(c[2]=b=>y(1))})]),c[6]||(c[6]=e("p",{class:"italic text-gray-500"}," Permet d'ajouter manuellement un article au ticket si le scanneur pose problème. ",-1))])]),_:1},8,["open"])}}}),Ge={class:"fixed left-32 right-0 bottom-0"},Je={class:"flex flex-col space-y-2 px-4 py-2 sm:px-6 lg:px-8"},Ke={class:"flex justify-between items-center"},We={class:"flex justify-between items-center"},Xe={class:"flex justify-between items-center pt-2"},Ye={class:"font-semibold"},et={class:"flex items-center space-x-8 px-4 py-2 sm:px-6 lg:px-8"},tt={class:"flex w-4/5 space-x-4"},st={class:"flex w-1/5 space-x-4"},nt={class:"flex flex-col space-y-4"},lt={class:"flex flex-col space-y-2"},ot={class:"flex flex-col space-y-2"},it={class:"flex flex-col space-y-4"},at={class:"flex flex-col space-y-2"},rt={class:"flex flex-col space-y-2"},ct={class:"flex flex-col space-y-2"},dt={class:"flex flex-col space-y-4"},ut={class:"flex flex-col space-y-2"},pt=H({__name:"GlobalActions",setup(w){const s=V(),x=_(!1),i=_(!1),o=_(!1),v=_(!1),r=_(!1),y=_(!1),u=_(0),f=_(0),c=k=>{k&&s.updateDiscounts(u.value,f.value)},h=_(0),T=q(()=>Math.max(h.value-s.currentTicket.totalPrice,0)),d=k=>{k&&(s.setPaymentMethod(B.CASH),s.validateTicket(),y.value=!0)},b=k=>{k&&(s.setPaymentMethod(B.TERMINAL),s.validateTicket(),y.value=!0)},Z=k=>{k&&s.deleteCurrentTicket()};return(k,t)=>{const Q=ee,z=Re,L=te,E=qe,P=S,G=Ee,J=Y;return p(),m(M,null,[e("div",Ge,[e("div",Je,[e("div",Ke,[t[15]||(t[15]=e("h3",{class:"text-sm font-semibold"},"Rabais en CHF :",-1)),e("button",{class:"text-sm font-semibold",onClick:t[0]||(t[0]=l=>x.value=!0)}," -"+g(n(s).currentTicket.rawDiscount.toFixed(2))+" CHF ",1)]),e("div",We,[t[16]||(t[16]=e("h3",{class:"text-sm font-semibold"},"Rabais en % :",-1)),e("button",{class:"text-sm font-semibold",onClick:t[1]||(t[1]=l=>x.value=!0)}," -"+g(n(s).currentTicket.percentageDiscount.toFixed(2))+"% ",1)]),e("div",Xe,[t[17]||(t[17]=e("h3",{class:"font-semibold"},"Prix total :",-1)),e("span",Ye,g(n(s).currentTicket.totalPrice.toFixed(2))+" CHF ",1)])]),e("div",et,[e("div",tt,[e("button",{class:"flex-1 inline-flex items-center justify-center h-12 rounded text-white bg-primary-500 hover:bg-primary-700 duration-200",onClick:t[2]||(t[2]=l=>i.value=!0)},[a(Q,{class:"w-6 h-6"})]),e("button",{class:"flex-1 inline-flex items-center justify-center h-12 rounded text-white bg-primary-500 hover:bg-primary-700 duration-200",onClick:t[3]||(t[3]=l=>o.value=!0)},[a(z,{class:"w-6 h-6"})])]),e("div",st,[e("button",{class:"flex-1 inline-flex items-center justify-center h-12 rounded text-white bg-primary-500 hover:bg-primary-700 duration-200",onClick:t[4]||(t[4]=l=>v.value=!0)},[a(L,{class:"w-6 h-6"})]),e("button",{class:"flex-1 inline-flex items-center justify-center h-12 rounded text-red-600 bg-white border-2 border-red-600 hover:text-white hover:bg-red-600 duration-200",onClick:t[5]||(t[5]=l=>r.value=!0)},[a(E,{class:"w-6 h-6"})])])])]),a(P,{open:n(x),"onUpdate:open":t[8]||(t[8]=l=>$(x)?x.value=l:null),title:"Appliquer des Rabais","approve-text":"Valider",onAccepted:c},{default:A(()=>[e("div",nt,[e("div",lt,[t[18]||(t[18]=e("label",{for:"raw-discount"}," Rabais en CHF : ",-1)),I(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=l=>$(u)?u.value=l:null),name:"raw-discount",class:"p-2 border rounded"},null,512),[[F,n(u)]])]),e("div",ot,[t[19]||(t[19]=e("label",{for:"percentage-discount"}," Rabais en % : ",-1)),I(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=l=>$(f)?f.value=l:null),name:"percentage-discount",class:"p-2 border rounded"},null,512),[[F,n(f)]])]),t[20]||(t[20]=e("p",{class:"italic text-gray-500"}," Ces rabais sont appliqués sur le total de tous les articles. Le rabais en % est appliqué après le rabais brut en CHF. ",-1))])]),_:1},8,["open"]),a(P,{open:n(i),"onUpdate:open":t[10]||(t[10]=l=>$(i)?i.value=l:null),title:"Paiement par Cash","approve-text":"Valider",onAccepted:d},{default:A(()=>[e("div",it,[e("div",at,[e("label",null," Montant à payer : "+g(n(s).currentTicket.totalPrice.toFixed(2))+" CHF ",1)]),e("div",rt,[t[21]||(t[21]=e("label",{for:"given-amount"}," Montant reçu : ",-1)),I(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=l=>$(h)?h.value=l:null),name:"given-amount",class:"p-2 border rounded"},null,512),[[F,n(h)]])]),e("div",ct,[e("label",null," Retour : "+g(n(T).toFixed(2))+" CHF ",1)]),t[22]||(t[22]=e("p",{class:"italic text-gray-500"}," Valider le paiement enregistre le ticket dans la base de donnée puis le supprime ici. ",-1))])]),_:1},8,["open"]),a(P,{open:n(o),"onUpdate:open":t[11]||(t[11]=l=>$(o)?o.value=l:null),title:"Paiement par Terminal","approve-text":"Valider",onAccepted:b},{default:A(()=>[e("div",dt,[e("div",ut,[e("label",null," Montant à payer : "+g(n(s).currentTicket.totalPrice.toFixed(2))+" CHF ",1)]),t[23]||(t[23]=e("p",{class:"italic text-gray-500"}," Valider le paiement enregistre le ticket dans la base de donnée puis le supprime ici. ",-1))])]),_:1},8,["open"]),a(G,{open:n(v),"onUpdate:open":t[12]||(t[12]=l=>v.value=l)},null,8,["open"]),a(P,{open:n(r),"onUpdate:open":t[13]||(t[13]=l=>$(r)?r.value=l:null),title:"Supprimer le ticket ?","approve-text":"Supprimer",type:n(X).ERROR,onAccepted:Z},{default:A(()=>t[24]||(t[24]=[e("p",{class:"italic text-gray-500"}," Il sera impossible de récupérer ce ticket après suppression. ",-1)])),_:1},8,["open","type"]),a(J,{open:n(y),ticketId:n(s).validatedTicketId,"onUpdate:open":t[14]||(t[14]=l=>y.value=l)},null,8,["open","ticketId"])],64)}}}),xt={},vt={class:"bg-gray-600 text-white"},ft={class:"flex justify-between items-center mx-auto max-w-7xl px-4 py-2 sm:px-6 lg:px-8"},mt={class:"mx-auto"};function _t(w,s){const x=ue,i=He,o=pt;return p(),m(M,null,[e("header",vt,[e("div",ft,[s[0]||(s[0]=e("h1",{class:"flex-1 text-2xl font-bold"},"Caisse",-1)),a(x)])]),e("main",null,[e("div",mt,[a(i),a(o)])])],64)}const $t=C(xt,[["render",_t]]);export{$t as default};
