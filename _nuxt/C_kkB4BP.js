import{_ as T,o as r,c,a as t,m as C,G as V,r as h,H as E,L as j,d as B,t as o,q as i,b as g,y as D,F as y,s as I,x as N,v as P}from"./B9Jdsbtr.js";import{a as S}from"./C3Jz3Cf2.js";import{f as A}from"./Ceq8xsyG.js";const H={},L={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"};function M(b,a){return r(),c("svg",L,a[0]||(a[0]=[t("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"},null,-1),t("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"},null,-1)]))}const R=T(H,[["render",M]]),$={class:"bg-gray-600 text-white"},q={class:"flex justify-between items-center mx-auto max-w-7xl px-4 py-2 sm:px-6 lg:px-8"},z={class:"flex-1 text-2xl font-bold"},Z={class:"text-xl font-semibold"},G={class:"flex flex-row-reverse items-center gap-4"},O={class:"flex items-center space-x-1"},Q={class:"mx-auto"},U={class:"flex flex-col"},J={class:"overflow-y-auto"},K={class:"flex-1 text-left"},W={class:"w-20 text-right"},X={class:"w-20 text-right"},Y={class:"w-20 text-right"},tt={class:"w-20 text-right"},st={class:"fixed left-32 right-0 bottom-0"},et={class:"flex flex-col space-y-2 px-4 py-2 sm:px-6 lg:px-8"},ot={class:"flex justify-between items-center"},it={class:"text-sm font-semibold"},nt={class:"flex justify-between items-center"},at={class:"text-sm font-semibold"},lt={class:"flex justify-between items-center pt-2"},rt={class:"font-semibold"},ct={key:0,class:"flex justify-between items-center pt-2"},dt={class:"font-semibold"},ft=C({__name:"[id]",setup(b){const a=V(),d=Array.isArray(a.params.id)?a.params.id[0]:a.params.id,n=h(null),x=h(!1);return E(async()=>{if(d)try{const l=await j().getTicketById(d);n.value=l||null}catch(l){console.error("Error fetching ticket:",l)}}),(l,s)=>{var m,p,f,_,u,v;const w=R,k=S;return r(),c(y,null,[t("header",$,[t("div",q,[t("h1",z,[s[2]||(s[2]=B(" Ticket ")),t("span",Z,"#"+o(i(d)),1)]),t("div",G,[t("button",{class:"rounded bg-white py-1 px-3 text-left text-gray-900 hover:bg-gray-100 duration-200",onClick:s[0]||(s[0]=e=>x.value=!0)},[t("span",O,[g(w,{class:"size-3.5 pt-0.5"}),s[3]||(s[3]=t("span",{class:"text-sm"},"Envoyer",-1))])])])])]),t("main",null,[t("div",Q,[t("div",U,[s[8]||(s[8]=D('<div class="flex items-center px-4 py-2 sm:px-6 lg:px-8 bg-gray-700 text-white font-semibold"><div class="flex-1 text-left">Article</div><div class="w-20 text-right">Quantit√©</div><div class="w-20 text-right">Rabais</div><div class="w-20 text-right">Prix</div><div class="w-20 text-right">Total</div></div>',1)),t("div",J,[(r(!0),c(y,null,I((m=i(n))==null?void 0:m.scannedArticles,(e,F)=>(r(),c("div",{key:e.article.id,class:P(["flex items-center px-4 py-2 sm:px-6 lg:px-8",F%2===0?"bg-white":"bg-gray-100"])},[t("div",K,o(e.article.name),1),t("div",W,o(e.quantity),1),t("div",X,o(e.article.discount),1),t("div",Y,o(e.article.unitPrice),1),t("div",tt,o(((e.article.unitPrice-(e.article.discount??0))*e.quantity).toFixed(2)),1)],2))),128))]),t("div",st,[t("div",et,[t("div",ot,[s[4]||(s[4]=t("h3",{class:"text-sm font-semibold"},"Rabais en CHF :",-1)),t("p",it," -"+o((p=i(n))==null?void 0:p.rawDiscount.toFixed(2))+" CHF ",1)]),t("div",nt,[s[5]||(s[5]=t("h3",{class:"text-sm font-semibold"},"Rabais en % :",-1)),t("p",at," -"+o((f=i(n))==null?void 0:f.percentageDiscount.toFixed(2))+"% ",1)]),t("div",lt,[s[6]||(s[6]=t("h3",{class:"font-semibold"},"Prix total :",-1)),t("span",rt,o((_=i(n))==null?void 0:_.totalPrice.toFixed(2))+" CHF ",1)]),(u=i(n))!=null&&u.datetime?(r(),c("div",ct,[s[7]||(s[7]=t("h3",{class:"font-semibold"},"Date et heure :",-1)),t("span",dt,o(("formatTimestamp"in l?l.formatTimestamp:i(A))((v=i(n))==null?void 0:v.datetime,!0)),1)])):N("",!0)])])])]),g(k,{open:i(x),ticketId:i(d),"onUpdate:open":s[1]||(s[1]=e=>x.value=e)},null,8,["open","ticketId"])])],64)}}});export{ft as default};
